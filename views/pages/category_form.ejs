<%- include('../partials/topbar'); %>
<div class="container-fluid">
  <div class="row">
    <%- include('../partials/sidebar'); %>
    <div class="col-sm-10 mt-2 mt-md-5 mx-auto d-flex flex-column align-items-center">
      <h1 class="my-3 fs-2 text-center">
        <%= title %> 
      </h1>
      <form method="POST" action="" class="p-3 w-75 border rounded">
        <div class="mb-3">
          <label for="categoryNameInput" class="mb-1 form-label">Category Name</label>
          <input name="name" type="text" class="form-control" id="categoryNameInput" required=true
            aria-describedby="nameHelp" value="<%= category?.name || '' %>">
          <div id="nameHelp" class="form-text">Give the category a meaningful name.</div>
        </div>
        <div class="mb-3">
          <label for="categoryDescriptionInput" class="mb-1 form-label">Category Description</label>
          <textarea name="description" type="text" class="form-control" id="categoryDescriptionInput" required=true
            aria-describedby="descriptionHelp" value="<%= category?.description || '' %>"><%= category?.description || '' %></textarea>
          <div id="descriptionHelp" class="form-text">Add a short description.</div>
        </div>
        <% if (isUpdating) { %> 
          <div class="mb-3">
            <label for="passwordInput" class="mb-1 form-label">Admin Password</label>
            <input name="password" type="password" class="form-control" id="passwordInput" required=true
              aria-describedby="passwordHelp">
            <div id="passwordHelp" class="form-text">Enter your admin password.</div>
          </div>
        <% } %> 
        <button type="submit" class="btn btn-primary"><%= isUpdating ? "Update Category" : "Create Category" %></button>
      </form>
      <div class="mt-2">
        <% if (isAdmin) { %>
          <p>Incorrect password.</p>
        <% } %> 
      </div>
      <div>
        <% if (errors) { %>
          <ul>
            <% errors.forEach(function(error) { %>
              <li><%= error %></li>
            <% })%>
          </ul>
          <p>Please, try it again.</p>
        <% }%>
      </div>
    </div>
  </div>
</div>
<%- include('../partials/footer'); %>