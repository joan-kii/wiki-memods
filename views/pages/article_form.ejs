<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head'); %> 
</head>
<body>
  <header>
    <%- include('../partials/topbar'); %>
  </header>
  <div class="container-fluid">
    <div class="row">
      <%- include('../partials/sidebar'); %>
      <div class="col-sm-10 mt-5 d-flex flex-column align-items-center">
        <h1 class="mb-3 fs-2 text-center">
          <%= title %> 
        </h1>
        <form method="POST" action="" class="p-3 w-50 border rounded">
            <div class="mb-3">
              <label for="categorySelect" class="mb-1 form_label">Category</label>
              <select class="mb-3 form-select" id="categorySelect" aria-label="Category" aria-describedby="categoryHelp">
                <% for (const category of category_list) { %>
                  <option value=<%= category.id><%= category.name%></option>
                <% } %>
              </select>
              <div id="categoryHelp" class="form-text">Choose a category.</div>
            </div>
          <div class="mb-3">
            <label for="titleInput" class="mb-1 form_label">Title</label>
            <input name="title" type="text" class="form-control" id="titleInput" required=true
              aria-describedby="titleHelp" value="<%= article === undefined ? '' : article.title %>">
            <div id="titleHelp" class="form-text">Give the article a meaningful name.</div>
          </div>
          <div class="mb-3">
            <label for="descriptionInput" class="mb-1 form_label">Description</label>
            <input name="description" type="text" class="form-control" id="descriptionInput" required=true
              aria-describedby="descriptionHelp" value="<%= article === undefined ? '' : article.description %>">
            <div id="descriptionHelp" class="form-text">Write a brief description of the article.</div>
          </div>
          <div class="mb-3">
            <label for="markdownInput" class="mb-1 form_label">Markdown</label>
            <input name="markdown" type="text" class="form-control" id="markdownInput" required=true
              aria-describedby="markdownHelp" value="<%= article === undefined ? '' : article.markdown %>">
            <div id="markdownHelp" class="form-text">
              Use markdown to write the article. You can learm about markdown <a href="https://www.markdownguide.org/basic-syntax/" target="_blank">here</a>.
            </div>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <div>
          <% if (errors) { %>
            <ul>
              <% errors.forEach(function(error) { %>
                <li><%= error%></li>
              <% })%>
            </ul>
            <p>Please, try again later.</p>
          <% }%>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
